webpackJsonp([2],{387:function(e,t,a){a(417);var n=a(40)(a(405),a(443),"data-v-2a7512ad",null);n.options.__file="/Users/cai/Documents/project/orangePomelo/src/pages/fault-management.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] fault-management.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},394:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"base-table",props:{options:{type:Object,default:function(){return{searchs:[],columns:[]}}}},data:function(){return{headerId:"header"+Date.now(),data:[],append:this.$slots.append,total:0,pager:{currPage:1,pageSize:10},height:window.innerHeight-240,loading:!1}},computed:{columns:function(){return this.options.columns}},mounted:function(){this.options.ajaxURL&&this.ajaxRequest()},methods:{searchAjax:function(){this.pager.currPage=1,this.ajaxRequest()},ajaxRequest:function(){var e=this,t=this.options.ajaxURL;if(!t)return console.log("%c 请填写请求接口连接 ","background:#ed4014;color:#fff");var a=this.searchParam();this.$http.get(t,{params:a}).then(function(t){"0"==t.code&&(e.data=t.result.list,e.total=t.result.totalRow)}).catch(function(e){})},searchParam:function(){var e={page:this.pager.currPage,limit:this.pager.pageSize},t=!0,a=!1,n=void 0;try{for(var r,o=this.options.searchs[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value,s="string"==typeof i.value?i.value.trim():i.value;i.prop&&""!==s&&(e[i.prop]=s)}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}return e},currpageMonitor:function(e){this.pager.currPage=e,this.ajaxRequest()},pagesizeMonitor:function(e){this.pager.pageSize=e,this.ajaxRequest()}}}},395:function(e,t){},396:function(e,t,a){a(395);var n=a(40)(a(394),a(397),null,null);n.options.__file="/Users/cai/Documents/project/orangePomelo/src/pages/components/Table.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] Table.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},397:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-table"},[e.options.hideHeader?e._e():a("div",{staticClass:"header",attrs:{id:e.headerId}},[e._l(e.options.searchs,function(t,n){return["input"===t.type?[a("Input",{key:"input"+n,attrs:{placeholder:t.placeholder,clearable:""},on:{"on-enter":e.searchAjax},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item['value']"}})]:"select"===t.type?[a("Select",{key:"select"+n,attrs:{placeholder:t.placeholder,clearable:"","not-found-text":""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item['value']"}},e._l(t.option,function(t){return a("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.name))])}))]:e._e()]}),e._v(" "),a("Button",{on:{click:e.searchAjax}},[e._v("搜索")]),e.append?[e._t("append")]:e._e()],2),e._v(" "),a("Table",{staticClass:"iau-table",attrs:{columns:e.columns,data:e.data,"no-data-text":"",height:""+e.height,loading:e.loading}}),e._v(" "),a("div",{staticClass:"footer"},[a("Page",{attrs:{current:e.pager.currPage,"page-size":e.pager.pageSize,total:e.total,"no-data-text":"暂时没有数据","no-filtered-data-text":"暂时没有数据","show-sizer":"","show-total":"","show-elevator":""},on:{"on-change":e.currpageMonitor,"on-page-size-change":e.pagesizeMonitor}})],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},404:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{options:{type:Object,default:{}}},data:function(){return{data:this.options.data,roleList:[],implementerList:[]}},mounted:function(){this.searchImplementers()},methods:{searchImplementers:function(){var e=this;this.$http.get("/faultTicket/implementers").then(function(t){0==t.code&&(e.roleList=t.result)})},roleChange:function(e){var t=this;if(this.data.implementerId="",!e)return void(this.implementerList=[]);this.roleList.map(function(a){a.roleId==e&&(t.implementerList=a.implementers)})}}}},405:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(396),r=a.n(n),o=a(437),i=a.n(o),s=[{type:"input",placeholder:"设备名称",prop:"deviceNameSearch",value:""},{type:"select",placeholder:"选择派单状态",prop:"ticketStatus",option:[{code:1,name:"未派单"},{code:2,name:"已派单"},{code:3,name:"已接单"},{code:4,name:"处理中"},{code:5,name:"完工"},{code:6,name:"不处理"}]}];t.default={components:{BaseTable:r.a,detaulComponent:i.a},data:function(){var e=this;return{options:{searchs:s,columns:[],ajaxURL:"/faultTicket"},columnsOrder:[{title:"工单ID",align:"center",key:"faultTicketId",width:100},{title:"设备名称",align:"center",key:"deviceName",minWidth:180},{title:"会议室",align:"center",key:"councilHall",minWidth:100},{title:"工单状态",align:"center",key:"ticketStatus",width:100,render:function(e,t){var a="",n="#10B49B";switch(t.row.ticketStatus){case 1:a="未派单",n="#E00005";break;case 2:a="已派单",n="#0A73F2";break;case 3:a="已接单";break;case 4:a="处理中",n="#EA9812";break;case 5:a="完工";break;case 6:a="不处理"}return e("span",{style:{color:n},domProps:{innerHTML:a}})}},{title:"描述",align:"center",width:160,key:"describe"},{align:"center",title:"创建时间",width:190,key:"createDate"},{title:"创建人",align:"center",width:100,key:"founder"},{title:"操作",width:144,align:"center",render:function(t,a){return 1!==a.row.ticketStatus?t("Button",{props:{type:"primary",size:"small"},on:{click:function(t){e.detail("detail",a.row)}}},"派单详情"):t("span",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(t){e.detail("sendOrder",a.row),e.$refs.table.searchAjax()}}},"派单"),t("Button",{style:{marginLeft:"12px"},props:{type:"warning",size:"small"},on:{click:function(t){e.detail("destroy",a.row)}}},"销单")])}}],columnsLog:[{title:"日志ID",align:"center",key:"faultId"},{title:"设备名称",align:"center",key:"deviceName"},{title:"描述",align:"center",key:"describe"},{title:"故障分类",align:"center",key:"faultType"},{title:"创建时间",align:"center",key:"faultTime"}],active:0}},mounted:function(){this.options.columns=this.columnsOrder},methods:{tabActive:function(e){this.active=e,e?(this.options.columns=this.columnsLog,this.options.ajaxURL="/faultLog",this.options.searchs=[{type:"input",placeholder:"设备名称",prop:"deviceNameSearch",value:""}],this.$refs.table.searchAjax()):(this.options.columns=this.columnsOrder,this.options.ajaxURL="/faultTicket",this.options.searchs=s,this.$refs.table.searchAjax())},detail:function(e,t){var a=this;"destroy"==e?this.$popup({content:"此操作将永久删除该记录, 是否继续?",onOk:function(e){console.log(e),a.$http.post("/faultTicket/receive?faultTicketId="+t.faultTicketId+"&type=2").then(function(e){"0"!=e.code&&a.$toast.error(e.message),a.$toast.success(e.message)})}}):(t.implementerId=null,t.managerRoleid=null,this.$popup({component:i.a,hideTips:!0,loading:!0,props:{options:{type:e,data:t}},onOk:function(t,n){if("detail"==e)return t.remove();n.$refs.form.validate(function(e){if(e){var r=n.data,o="?faultTicketId="+r.faultTicketId+"&managerRoleid="+r.managerRoleid+"&implementerId="+r.implementerId+"&remark="+r.remark;a.$http.post("/faultTicket/update"+o).then(function(e){if("0"!=e.code)return a.$toast.error(e.message),void t.regain();a.$toast.success(e.message),t.remove(),a.$refs.table.searchAjax()})}else t.regain()})}}))}}}},417:function(e,t){},426:function(e,t){},437:function(e,t,a){a(426);var n=a(40)(a(404),a(452),null,null);n.options.__file="/Users/cai/Documents/project/orangePomelo/src/pages/fault-detail-components.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] fault-detail-components.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},443:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("Header"),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"left"},[a("Corner"),e._v(" "),a("ul",[a("li",{class:"0"==e.active?"active":"",on:{click:function(t){e.tabActive(0)}}},[e._v("故障工单")]),e._v(" "),a("li",{class:"1"==e.active?"active":"",on:{click:function(t){e.tabActive(1)}}},[e._v("故障日志")])])],1),e._v(" "),a("div",{staticClass:"rigt"},[a("base-table",{ref:"table",attrs:{options:e.options}}),e._v(" "),a("Corner")],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},452:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"faultdetail"},["detail"==e.options.type?a("div",[a("Steps",{attrs:{current:5,direction:"vertical"}},e._l(e.data.handles,function(e,t){return a("Step",{key:t,attrs:{title:e.handleDesc,content:"时间："+e.handleTime}})})),e._v(" "),a("div",{staticClass:"detailfoot"},[a("p",[e._v("预计耗时："+e._s(e.data.estimatedTime))]),e._v(" "),a("p",[e._v("实际耗时："+e._s(e.data.actualTime))])])],1):"sendOrder"==e.options.type?a("div",[a("Form",{ref:"form",attrs:{"label-position":"left",model:e.data,"label-width":78,"show-message":!1}},[a("FormItem",{attrs:{label:"设备名称",prop:"deviceName"}},[a("Input",{attrs:{placeholder:"",value:e.data.deviceName,readonly:""}})],1),e._v(" "),a("FormItem",{attrs:{label:"会议室"}},[a("Input",{attrs:{placeholder:"",value:e.data.councilHall,readonly:""}})],1),e._v(" "),a("FormItem",{attrs:{label:"故障描述"}},[a("Input",{attrs:{placeholder:"",type:"textarea",value:e.data.describe,readonly:""}})],1),e._v(" "),a("FormItem",{attrs:{label:"角色",prop:"managerRoleid",rules:{required:!0,message:"必填",type:"number",trigger:"change"}}},[a("Select",{attrs:{placeholder:""},on:{"on-change":e.roleChange},model:{value:e.data.managerRoleid,callback:function(t){e.$set(e.data,"managerRoleid",t)},expression:"data.managerRoleid"}},e._l(e.roleList,function(t){return a("Option",{key:t.roleId,attrs:{value:t.roleId}},[e._v(e._s(t.roleName))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"实施人",prop:"implementerId",rules:{required:!0,message:"必填",type:"number",trigger:"change"}}},[a("Select",{attrs:{placeholder:""},model:{value:e.data.implementerId,callback:function(t){e.$set(e.data,"implementerId",t)},expression:"data.implementerId"}},e._l(e.implementerList,function(t){return a("Option",{key:t.managerId,attrs:{value:t.managerId}},[e._v(e._s(t.managerNickname))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{placeholder:"",type:"textarea"},model:{value:e.data.remark,callback:function(t){e.$set(e.data,"remark",t)},expression:"data.remark"}})],1)],1)],1):e._e()])},staticRenderFns:[]},e.exports.render._withStripped=!0}});